{% extends "base.html" %}
{% block title %}Login - Sistema Escolar{% endblock %}

{% block content %}

<style>
        /* Estilos b√°sicos para o modal (popup) usando <dialog> */
        #imagem-modal {
            border: none;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            text-align: center;
            background-color: white; /* Garante um fundo branco para o modal */

            /* NOVOS ESTILOS PARA AJUSTE */
            width: fit-content; /* Ajusta a largura do modal ao conte√∫do */
            height: fit-content; /* Ajusta a altura do modal ao conte√∫do */
            max-width: 90vw;    /* O modal n√£o exceder√° 90% da largura da viewport */
            max-height: 90vh;   /* O modal n√£o exceder√° 90% da altura da viewport */
            box-sizing: border-box; /* Garante que padding e border sejam inclu√≠dos na width/height */
        }
        /* Estilo para a imagem dentro do modal */
        #imagem-modal img {
            /* NOVOS ESTILOS PARA AJUSTE */
            max-width: 100%;    /* A imagem n√£o exceder√° 100% da largura do seu container */
            max-height: 70vh;   /* A imagem n√£o exceder√° 70% da altura da viewport */
            width: auto;        /* Ajusta a largura automaticamente */
            height: auto;       /* Ajusta a altura automaticamente */
            display: block;
            margin: 0 auto 15px auto; /* Centraliza a imagem e adiciona margem inferior */
            object-fit: contain; /* Garante que a imagem inteira seja vis√≠vel, escalando-a se necess√°rio */
        }
        /* Estilo para o backdrop (fundo escurecido) */
        #imagem-modal::backdrop {
            background: rgba(0, 0, 0, 0.7);
        }
        /* Estilo para o bot√£o de fechar */
        #fechar-modal {
            padding: 8px 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f0f0f0;
            cursor: pointer;
            font-size: 1em;
        }
        #fechar-modal:hover {
            background-color: #e0e0e0;
        }
        .modal-images-container {
    display: flex;
    justify-content: center; /* Centraliza as imagens horizontalmente */
    align-items: center; /* Alinha as imagens verticalmente */
    gap: 15px; /* Espa√ßo entre as imagens */
    margin-bottom: 15px; /* Espa√ßo abaixo das imagens */
    flex-wrap: wrap; /* Permite que as imagens quebrem a linha em telas menores */
}
    </style>


<div class="row justify-content-center">
  <div class="col-md-4">
    <h2 class="mb-3">Login do Professor</h2>
    <form method="post">
      <div class="mb-3">
        <label for="username" class="form-label">Usu√°rio</label>
        <input type="text" class="form-control" id="username" name="username" required>
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Senha</label>
        <input type="password" class="form-control" id="password" name="password" required>
      </div>
      <button type="submit" class="btn btn-primary w-100">Entrar</button>
      <p class="mt-3 text-muted">Usu√°rio: <code>professor</code> | Senha: <code>1234</code></p>
      <p class="mt-3 text-muted"><code style="color:white">Usu√°rio: admin | Senha: admin123</code> </p>
    </form>
  </div>
</div>

<dialog id="imagem-modal">
        <h2>üéâ Faz o L!</h2>
        <div class="modal-images-container">
          <img src="static\image\l.png" alt="Imagem comemorativa Faz o L">
          <img src="static\image\L.jpg" alt="Imagem comemorativa Faz o L">
        </div>
        <button id="fechar-modal">Fechar</button>
    </dialog>

    <script>
        // Elementos DOM
        const dialog = document.getElementById('imagem-modal');
        const fecharBotao = document.getElementById('fechar-modal');

        // Sequ√™ncia de teclas esperada (em min√∫sculas)
        const sequenciaEsperada = "fazol";
        let sequenciaAtual = ""; // Armazena as teclas pressionadas

        // Fun√ß√£o para mostrar o popup
        function mostrarPopup() {
            // O m√©todo showModal() abre o dialog como um modal
            dialog.showModal();
        }

        // Fun√ß√£o para fechar o popup
        function fecharPopup() {
            dialog.close();
        }

        // Event listener para detectar teclas pressionadas no documento inteiro
        document.addEventListener('keydown', (evento) => {
            // Converte a tecla para min√∫scula e pega apenas a primeira letra
            const teclaPressionada = evento.key.toLowerCase().charAt(0);

            // Se a tecla pressionada for a primeira letra da sequ√™ncia
            if (teclaPressionada === sequenciaEsperada[sequenciaAtual.length]) {
                // Adiciona a tecla √† sequ√™ncia atual
                sequenciaAtual += teclaPressionada;

                // Verifica se a sequ√™ncia completa foi digitada
                if (sequenciaAtual === sequenciaEsperada) {
                    mostrarPopup();
                    sequenciaAtual = ""; // Reseta a sequ√™ncia ap√≥s mostrar
                }
            } else {
                // Se a tecla n√£o for a esperada, reseta a sequ√™ncia
                sequenciaAtual = "";
                // Tenta recome√ßar a sequ√™ncia com a tecla atual
                if (teclaPressionada === sequenciaEsperada[0]) {
                     sequenciaAtual = teclaPressionada;
                }
            }
        });

        // Event listener para fechar o modal com o bot√£o
        fecharBotao.addEventListener('click', fecharPopup);

        // O modal tamb√©m pode ser fechado com a tecla ESC por padr√£o do <dialog>
    </script>
{% endblock %}